//>>built
define("dojo/back",["./_base/config","./_base/lang","./_base/sniff","./dom","./dom-construct","./_base/window","require"],function(h,c,j,y,z,A,t){function f(){var a=d.pop();if(a){var b=d[d.length-1];!b&&d.length==0&&(b=k);b&&(b.kwArgs.back?b.kwArgs.back():b.kwArgs.backButton?b.kwArgs.backButton():b.kwArgs.handle&&b.kwArgs.handle("back"));e.push(a)}}function n(){var a=e.pop();a&&(a.kwArgs.forward?a.kwArgs.forward():a.kwArgs.forwardButton?a.kwArgs.forwardButton():a.kwArgs.handle&&a.kwArgs.handle("forward"),
d.push(a))}function l(a,b,d){return{url:a,kwArgs:b,urlHash:d}}function o(a){a=a.split("?");return a.length<2?null:a[1]}function u(){var a=(h.dojoIframeHistoryUrl||t.toUrl("./resources/iframe_history.html"))+"?"+(new Date).getTime();p=!0;if(i)j("webkit")?i.location=a:window.frames[i.name].location=a;return a}function B(){if(!q){var a=d.length,b=m();(b===v||window.location.href==w)&&a==1?f():e.length>0&&e[e.length-1].urlHash===b?n():a>=2&&d[a-2]&&d[a-2].urlHash===b&&f()}}var c=c.getObject("dojo.back",
!0),m=c.getHash=function(){var a=window.location.hash;a.charAt(0)=="#"&&(a=a.substring(1));return j("mozilla")?a:decodeURIComponent(a)},r=c.setHash=function(a){a||(a="");window.location.hash=encodeURIComponent(a)},w=typeof window!=="undefined"?window.location.href:"",v=typeof window!=="undefined"?m():"",k=null,x=null,s=null,i=null,e=[],d=[],p=!1,q=!1;c.goBack=f;c.goForward=n;c.init=function(){if(!y.byId("dj_history")){var a=h.dojoIframeHistoryUrl||t.toUrl("./resources/iframe_history.html");h.afterOnLoad||
document.write('<iframe style="border:0;width:1px;height:1px;position:absolute;visibility:hidden;bottom:0;right:0;" name="dj_history" id="dj_history" src="'+a+'"></iframe>')}};c.setInitialState=function(a){k=l(w,a,v)};c.addToHistory=function(a){e=[];var b=null,c=null;i||(i=window.frames.dj_history);s||(s=z.create("a",{style:{display:"none"}},A.body()));if(a.changeUrl){b=""+(a.changeUrl!==!0?a.changeUrl:(new Date).getTime());if(d.length==0&&k.urlHash==b){k=l(c,a,b);return}else if(d.length>0&&d[d.length-
1].urlHash==b){d[d.length-1]=l(c,a,b);return}q=!0;setTimeout(function(){r(b);q=!1},1);s.href=b;if(j("ie")){var c=u(),f=a.back||a.backButton||a.handle,g=function(a){m()!=""&&setTimeout(function(){r(b)},1);f.apply(this,[a])};if(a.back)a.back=g;else if(a.backButton)a.backButton=g;else if(a.handle)a.handle=g;var h=a.forward||a.forwardButton||a.handle,g=function(a){m()!=""&&r(b);h&&h.apply(this,[a])};if(a.forward)a.forward=g;else if(a.forwardButton)a.forwardButton=g;else if(a.handle)a.handle=g}else j("ie")||
x||(x=setInterval(B,200))}else c=u();d.push(l(c,a,b))};c._iframeLoaded=function(a,b){var c=o(b.href);c==null?d.length==1&&f():p?p=!1:d.length>=2&&c==o(d[d.length-2].url)?f():e.length>0&&c==o(e[e.length-1].url)&&n()};return c});