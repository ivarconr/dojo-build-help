//>>built
define("dojo/dnd/Mover",["../_base/array","../_base/connect","../_base/declare","../_base/event","../_base/sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../touch","./common","./autoscroll"],function(j,e,k,d,i,l,m,h,n,o,f,q,p){return k("dojo.dnd.Mover",[o],{constructor:function(a,b,c){this.node=m.byId(a);this.marginBox={l:b.pageX,t:b.pageY};this.mouseButton=b.button;b=this.host=c;a=a.ownerDocument;this.events=[e.connect(a,f.move,this,"onFirstMove"),e.connect(a,f.move,
this,"onMouseMove"),e.connect(a,f.release,this,"onMouseUp"),e.connect(a,"ondragstart",d.stop),e.connect(a.body,"onselectstart",d.stop)];if(b&&b.onMoveStart)b.onMoveStart(this)},onMouseMove:function(a){p.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);d.stop(a)},onMouseUp:function(a){(i("webkit")&&i("mac")&&this.mouseButton==2?a.button==0:this.mouseButton==a.button)&&this.destroy();d.stop(a)},onFirstMove:function(a){var b=this.node.style,c,d=this.host;switch(b.position){case "relative":case "absolute":c=
Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=h.getMarginBox(this.node);c=l.doc.body;var g=n.getComputedStyle(c),f=h.getMarginBox(c,g),g=h.getContentBox(c,g);c=b.l-(g.l-f.l);b=b.t-(g.t-f.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(d&&d.onFirstMove)d.onFirstMove(this,a);e.disconnect(this.events.shift())},destroy:function(){j.forEach(this.events,e.disconnect);var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);
this.events=this.node=this.host=null}})});