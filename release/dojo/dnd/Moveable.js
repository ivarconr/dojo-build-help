//>>built
define("dojo/dnd/Moveable",["../_base/array","../_base/connect","../_base/declare","../_base/event","../dom","../dom-class","../Evented","../topic","../touch","./common","./Mover","../_base/window"],function(j,c,k,d,g,e,l,h,f,m,n,i){return k("dojo.dnd.Moveable",[l],{handle:"",delay:0,skip:!1,constructor:function(a,b){this.node=g.byId(a);b||(b={});this.handle=b.handle?g.byId(b.handle):null;if(!this.handle)this.handle=this.node;this.delay=b.delay>0?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:
n;this.events=[c.connect(this.handle,f.press,this,"onMouseDown"),c.connect(this.handle,"ondragstart",this,"onSelectStart"),c.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(a,b,c){return new c(b,a)},destroy:function(){j.forEach(this.events,c.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!m.isFormElement(a)){if(this.delay)this.events.push(c.connect(this.handle,f.move,this,"onMouseMove"),c.connect(this.handle,f.release,
this,"onMouseUp")),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);d.stop(a)}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);d.stop(a)},onMouseUp:function(a){for(var b=0;b<2;++b)c.disconnect(this.events.pop());d.stop(a)},onSelectStart:function(a){(!this.skip||!dojo.dnd.isFormElement(a))&&d.stop(a)},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){h.publish("/dnd/move/start",
a);e.add(i.body(),"dojoMove");e.add(this.node,"dojoMoveItem")},onMoveStop:function(a){h.publish("/dnd/move/stop",a);e.remove(i.body(),"dojoMove");e.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})});