//>>built
define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","./MappedTextBox","./ComboBoxMixin"],function(j,k,i,f,l,m){return k("dijit.form.FilteringSelect",[l,m],{required:!0,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened},isValid:function(){return this.item||!this.required&&this.get("displayedValue")==""},_refreshState:function(){this.searchTimer||this.inherited(arguments)},_callbackSetLabel:function(a,b,d,c){b&&
b[this.searchAttr]!==this._lastQuery||!b&&a.length&&this.store.getIdentity(a[0])!=this._lastQuery||(a.length?this.set("item",a[0],c):this.set("value","",c||c===void 0&&!this.focused,this.textbox.value,null))},_openResultList:function(a,b){b[this.searchAttr]===this._lastQuery&&(this.inherited(arguments),this.item===void 0&&this.validate(!0))},_getValueAttr:function(){return this.valueNode.value},_getValueField:function(){return"value"},_setValueAttr:function(a,b,d,c){this._onChangeActive||(b=null);
if(c===void 0){if(a===null||a==="")if(a="",!f.isString(d)){this._setDisplayedValueAttr(d||"",b);return}var e=this;this._lastQuery=a;i.when(this.store.get(a),function(a){e._callbackSetLabel(a?[a]:[],void 0,void 0,b)})}else this.valueNode.value=a,this.inherited(arguments)},_setItemAttr:function(){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value},_getDisplayQueryString:function(a){return a.replace(/([\\\*\?])/g,"\\$1")},_setDisplayedValueAttr:function(a,b){a==null&&(a="");if(!this._created){if(!("displayedValue"in
this.params))return;b=!1}if(this.store){this.closeDropDown();var d=f.clone(this.query),c=this._getDisplayQueryString(a),e;this.store._oldAPI?e=c:(e=j.patternToRegExp(c,this.ignoreCase),e.toString=function(){return c});this._lastQuery=d[this.searchAttr]=e;this._lastDisplayedValue=this.textbox.value=a;this._set("displayedValue",a);var g=this,h={ignoreCase:this.ignoreCase,deep:!0};f.mixin(h,this.fetchProperties);this._fetchHandle=this.store.query(d,h);i.when(this._fetchHandle,function(a){g._fetchHandle=
null;g._callbackSetLabel(a||[],d,h,b)},function(){g._fetchHandle=null})}},undo:function(){this.set("displayedValue",this._lastDisplayedValue)}})});