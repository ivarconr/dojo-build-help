//>>built
define("dijit/_PaletteMixin",["dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","./_CssStateMixin","./focus","./typematic"],function(m,h,e,j,n,o,f,p,l,q){return m("dijit._PaletteMixin",[p],{defaultTimeout:500,timeoutChangeRate:0.9,value:"",_selectedCell:-1,tabIndex:"0",cellClass:"dijitPaletteCell",dyeClass:"",summary:"",_setSummaryAttr:"paletteTableNode",_dyeFactory:function(a){return new (f.getObject(this.dyeClass))(a)},_preparePalette:function(a,
c){this._cells=[];var b=this._blankGif;this.connect(this.gridNode,"ondijitclick","_onCellClick");for(var g=0;g<a.length;g++)for(var h=j.create("tr",{tabIndex:"-1"},this.gridNode),i=0;i<a[g].length;i++){var d=a[g][i];if(d){var e=this._dyeFactory(d,g,i),d=j.create("td",{"class":this.cellClass,tabIndex:"-1",title:c[d],role:"gridcell"});e.fillCell(d,b);j.place(d,h);d.index=this._cells.length;this._cells.push({node:d,dye:e})}}this._xDim=a[0].length;this._yDim=a.length;var f={UP_ARROW:-this._xDim,DOWN_ARROW:this._xDim,
RIGHT_ARROW:this.isLeftToRight()?1:-1,LEFT_ARROW:this.isLeftToRight()?-1:1},k;for(k in f)this._connects.push(q.addKeyListener(this.domNode,{charOrCode:o[k],ctrlKey:!1,altKey:!1,shiftKey:!1},this,function(){var a=f[k];return function(b){this._navigateByKey(a,b)}}(),this.timeoutChangeRate,this.defaultTimeout))},postCreate:function(){this.inherited(arguments);this._setCurrent(this._cells[0].node)},focus:function(){l.focus(this._currentFocus)},_onCellClick:function(a){for(var c=a.target;c.tagName!="TD";){if(!c.parentNode||
c==this.gridNode)return;c=c.parentNode}var b=this._getDye(c).getValue();this._setCurrent(c);l.focus(c);this._setValueAttr(b,!0);n.stop(a)},_setCurrent:function(a){"_currentFocus"in this&&h.set(this._currentFocus,"tabIndex","-1");(this._currentFocus=a)&&h.set(a,"tabIndex",this.tabIndex)},_setValueAttr:function(a,c){this._selectedCell>=0&&e.remove(this._cells[this._selectedCell].node,this.cellClass+"Selected");this._selectedCell=-1;if(a)for(var b=0;b<this._cells.length;b++)if(a==this._cells[b].dye.getValue()){this._selectedCell=
b;e.add(this._cells[b].node,this.cellClass+"Selected");break}this._set("value",this._selectedCell>=0?a:null);if(c||c===void 0)this.onChange(a)},onChange:function(){},_navigateByKey:function(a,c){if(c!=-1){var b=this._currentFocus.index+a;if(b<this._cells.length&&b>-1)b=this._cells[b].node,this._setCurrent(b),setTimeout(f.hitch(dijit,"focus",b),0)}},_getDye:function(a){return this._cells[a.index].dye}})});